<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gmail</title>
    <link rel="stylesheet" href="style.css">
    <link rel="shortcut icon" href="https://www.google.com/favicon.ico" type="image/x-icon">
</head>
<body>
    <ion-icon class="back-arrow inactive" name="chevron-back-outline"></ion-icon>
    <div class="main">
        <div class="wrapper">
            <div class="left">
                <svg width="48" height="48" viewBox="0 0 40 48" aria-hidden="true">
                    <path fill="#4285F4" d="M39.2 24.45c0-1.55-.16-3.04-.43-4.45H20v8h10.73c-.45 2.53-1.86 4.68-4 6.11v5.05h6.5c3.78-3.48 5.97-8.62 5.97-14.71z"></path><path fill="#34A853" d="M20 44c5.4 0 9.92-1.79 13.24-4.84l-6.5-5.05C24.95 35.3 22.67 36 20 36c-5.19 0-9.59-3.51-11.15-8.23h-6.7v5.2C5.43 39.51 12.18 44 20 44z">
                    </path>
                    <path fill="#FABB05" d="M8.85 27.77c-.4-1.19-.62-2.46-.62-3.77s.22-2.58.62-3.77v-5.2h-6.7C.78 17.73 0 20.77 0 24s.78 6.27 2.14 8.97l6.71-5.2z">
                    </path>
                    <path fill="#E94235" d="M20 12c2.93 0 5.55 1.01 7.62 2.98l5.76-5.76C29.92 5.98 25.39 4 20 4 12.18 4 5.43 8.49 2.14 15.03l6.7 5.2C10.41 15.51 14.81 12 20 12z">
                    </path>
                </svg>

                <div class="sign-in-header-div">
                    <span class="sign-in-header">Sign in</span>
                </div>

                <div>
                    <span class="subtitle">to continue to Gmail</span>

                    <div class="email-div">
                        <ion-icon name="person-circle-outline"></ion-icon>
                        <span class="email-address">someone@gmail.com</span>
                        <ion-icon name="caret-down-outline"></ion-icon>
                    </div>
                </div>

            </div>
            <div class="right">
                <div class="email-wrapper active">
                    <div class="email-field-wrapper">
                        <input type="text" placeholder="Email or phone" id="email-field">

                        <div class="invalid-input email">
                            <svg fill="currentColor" focusable="false" width="16px" height="16px" viewBox="0 0 24 24">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z">
                                </path>
                            </svg>

                            <span id="invalid-email" class="invalid-spans">
                                Enter a valid email or phone number
                            </span>

                            <span id="no-email" class="invalid-spans">
                                Enter an email or phone number
                            </span>
                        </div>

                        <div style="padding: 9px 0 3px 0;">
                            <button class="forgot-email-btn">Forgot email?</button>
                        </div>
                    </div>
                    <div class="guest-mode">
                        Not your computer? Use Guest mode to sign in privately.
                        <a href="#">
                            Learn more about using Guest mode
                        </a>
                    </div>
                </div>
                <div class="password-wrapper">
                    <div class="password-field-wrapper">
                        <span style="display:block; margin-bottom: 40px; font-size: 14px;">
                            To continue, first verify it's you
                        </span>
                        <input id="password-field" type="password" placeholder="Enter your password" autocomplete="off">
                        <div class="invalid-input password">
                            <svg focusable="false" width="16px" height="16px" viewBox="0 0 24 24">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z">
                                </path>
                            </svg>

                            <span id="wrong-password" class="invalid-spans">
                                Wrong password. Try again or click Forgot password to reset it.  <!-- the password is too weak -->
                            </span>

                            <span id="no-password" class="invalid-spans">
                                Enter a password
                            </span>
                            
                        </div>
                        <label class="show-password-div">
                            <input id="show-password-chckbox" type="checkbox">
                            <span style="font-size: 14px;">Show password</span>
                        </label>
                    </div>
                </div>
            </div>

            <div class="bottom">
                <button class="create-account-btn">
                    Create account?
                    <!-- Forgot password? -->
                </button>  
                <button class="next-btn">
                    Next
                </button>
            </div>
        </div>
        <div class="footer">
            <div class="lang">
                <select name="English" id="">
                    <option value="English">English</option>
                    <option value="English">Slovenscina</option>
                    <option value="English">Espanol</option>
                </select>
            </div>
            <ul class="group-hpt">
                <li><a href="#">Help</a></li>
                <li><a href="#">Privacy</a></li>
                <li><a href="#">Terms</a></li>
            </ul>
        </div>
    </div>

    <script>

        const emailWrapper = document.querySelector(".email-wrapper");
        const passwordWrapper = document.querySelector(".password-wrapper");

        const nextButton = document.querySelector(".next-btn");
        const createForgotButton = document.querySelector(".create-account-btn");
        const backArrow = document.querySelector(".back-arrow");
        
        const invalidEmailDiv = document.querySelector(".invalid-input.email");
        const invalidEmail = document.querySelector("#invalid-email");
        const noEmail = document.querySelector("#no-email");

        const invalidPasswordDiv = document.querySelector(".invalid-input.password");
        const invalidPassword = document.querySelector("#wrong-password");
        const noPassword = document.querySelector("#no-password");
        
        const title = document.querySelector(".sign-in-header");
        const subtitle = document.querySelector(".subtitle");
        const emailDiv = document.querySelector(".email-div");
        const emailSpan = document.querySelector(".email-address");

        const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
        const phoneRegex  = /(?:\+?\d{1,3}[-.\s]?)?(?:\(?\d{1,4}\)?[-.\s]?)?\d{1,4}[-.\s]?\d{1,4}[-.\s]?\d{1,9}/;
        const emailField = document.querySelector("#email-field");

        const passwordRegex = /^.{8,}$/;
        const passwordField = document.querySelector("#password-field");

        function validEmailOrPhone(input) {
            return emailRegex.test(input) || phoneRegex.test(input);
        }
        function validPassword(input) {
            return passwordRegex.test(input);
        }

        nextButton.addEventListener("click", (e) => {
            if (title.innerText == 'Sign in'){
                if (validEmailOrPhone(emailField.value)){
                    emailWrapper.classList.remove("active");
                    passwordWrapper.classList.add("active");
                    backArrow.classList.remove("inactive");
                    
                    title.innerText = "Welcome";
                    subtitle.style.display = "none";

                    emailDiv.classList.add("on");
                    emailSpan.innerText = emailField.value;
                    createForgotButton.innerText = "Forgot password?";
                } 
                else if (!(emailField.value == '') && !validEmailOrPhone(emailField.value)) {
                    invalidEmailDiv.classList.add("on");
                    if (noEmail.classList.contains("on")){
                        noEmail.classList.remove("on");
                    }
                    invalidEmail.classList.add("on");
                    emailField.classList.add("invalid");
                } 
                else if (emailField.value == '') {
                    invalidEmailDiv.classList.add("on");
                    if(invalidEmail.classList.contains("on")){
                       invalidEmail.classList.remove("on");
                    }
                    noEmail.classList.add("on");
                    emailField.classList.add("invalid");
                }   
            }
            else if (title.innerText == 'Welcome') {
                if (validPassword(passwordField.value)){
                    window.location.reload();
                    alert(`Signed in as ${emailField.value}\nwith password ${passwordField.value}`);

                } 
                else if (!(passwordField.value == '') && !validPassword(passwordField.value)) {
                    invalidPasswordDiv.classList.add("on");
                    if (noPassword.classList.contains("on")){
                        noPassword.classList.remove("on");
                    }
                    invalidPassword.classList.add("on");
                    passwordField.classList.add("invalid");
                } 
                else if (passwordField.value == '') {
                    invalidPasswordDiv.classList.add("on");
                    if(invalidPassword.classList.contains("on")){
                       invalidPassword.classList.remove("on");
                    }
                    noPassword.classList.add("on");
                    passwordField.classList.add("invalid");
                } 
            }
        });

        backArrow.addEventListener('click', () => {
            emailWrapper.classList.add("active");
            passwordWrapper.classList.remove("active");
            backArrow.classList.add("inactive");

            title.innerText = "Sign in";
            subtitle.style.display = "block";
            emailDiv.classList.remove("on");
            createForgotButton.innerText = "Create account?";
        });

        document.querySelector("#show-password-chckbox").addEventListener("change", (e) => {
            const passwordField = document.querySelector("#password-field");
            passwordField.type = e.target.checked ? 'text' : 'password';
        });

        
    </script>
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
</body>
</html>
